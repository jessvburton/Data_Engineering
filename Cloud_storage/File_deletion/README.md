# Google Cloud Storage Object Deletion Script

This script demonstrates how to delete objects from a Google Cloud Storage (GCS) bucket using the `google-cloud-storage` Python library. It provides two methods: deleting a single object and deleting all objects within a specified directory (prefix).

## Prerequisites

1.  **Google Cloud Platform (GCP) Account:** You need an active GCP account.
2.  **Google Cloud Storage Bucket:** You need an existing GCS bucket.
3.  **Service Account JSON Key:** You need a service account JSON key file with appropriate permissions to delete objects in the bucket.
4.  **Python 3.x:** Ensure you have Python 3.x installed.
5.  **`google-cloud-storage` Library:** Install the library using pip:

    ```bash
    pip install google-cloud-storage
    ```

## Setup

1.  **Service Account Key:**
    * Download your service account JSON key file and save it as `prodSA.json` (or any name you prefer) in the same directory as the script.
    * **Important:** Ensure this service account has the `storage.objects.delete` permission on the target bucket.
2.  **Configuration:**
    * Open the Python script and modify the following variables:
        * `service_account`: Path to your service account JSON key file (e.g., `"prodSA.json"`).
        * `bucket_name`: Name of your GCS bucket.
        * `bucket_file_path`: Path to the directory within the bucket (prefix). For example, `"my_directory/"`. If you want to delete a file in the root of the bucket this should be an empty string "".
        * `file_name`: Name of the file to delete (when deleting a single file).
        * `blob_name`: This variable is automatically generated by concatenating `bucket_file_path` and `file_name`.

## Usage

### Deleting a Single Object

1.  Ensure that the variables `bucket_name`, `bucket_file_path`, and `file_name` are set correctly.
2.  Run the script:

    ```bash
    python your_script_name.py
    ```

    The script will delete the specified object and print a confirmation message.

### Deleting All Objects in a Directory (Prefix)

1.  Uncomment the section of the script that iterates through `bucket.list_blobs(prefix=bucket_file_path)`.
2.  Ensure that the variables `bucket_name` and `bucket_file_path` are set correctly.
3.  Comment out the single object deletion portion of the script.
4.  Run the script:

    ```bash
    python your_script_name.py
    ```

    The script will delete all objects with the specified prefix and print a confirmation message for each deleted object.

## Example

```python
from google.cloud import storage

service_account = "prodSA.json"
bucket_name = "my-bucket"
bucket_file_path = "data/logs/"
file_name = "log.txt"
blob_name = bucket_file_path + file_name

storage_client = storage.Client.from_service_account_json(service_account)
bucket = storage_client.bucket(bucket_name)

# single object in the directory
blob = bucket.blob(blob_name)
blob.delete()
print(f"{blob} deleted from {bucket_name}/{bucket_file_path}")

# # all objects in the directory
# blobs = bucket.list_blobs(prefix=bucket_file_path)
# for blob in blobs:
#     blob.delete()
#     print(f"{blob} deleted from {bucket_name}/{bucket_file_path}")
